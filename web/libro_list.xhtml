<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>#{msg['book.list.title']}</title>
        <h:outputStylesheet library="css" name="style.css"/>
    </h:head>
    <h:body>
        <div class="header">
            <h1>#{msg['book.list.title']}</h1>
            <h:form>
                <h:commandLink value="EspaÃ±ol" action="#{localeController.changeLanguage('es')}" 
                               rendered="#{localeController.language != 'es'}"/>
                <h:outputText value="  " rendered="#{localeController.language != 'es'}"/>
                <h:commandLink value="English" action="#{localeController.changeLanguage('en')}" 
                               rendered="#{localeController.language != 'en'}"/>
            </h:form>
        </div>
        
        <div class="content">
            <h:form>
                <h:messages globalOnly="true" styleClass="messages"/>
                
                <h:commandLink value="#{msg['button.new']}" action="#{libroController.prepareCreate()}" styleClass="button"/>
                <br/><br/>
                
                <h:dataTable value="#{libroController.libros}" var="libro" 
                             styleClass="data-table" headerClass="table-header" 
                             rowClasses="table-row-odd,table-row-even">
                    <h:column>
                        <f:facet name="header">#{msg['book.title']}</f:facet>
                        #{libro.titulo}
                    </h:column>
                    <h:column>
                        <f:facet name="header">#{msg['book.authors']}</f:facet>
                        #{libroController.getAutoresAsString(libro)}
                    </h:column>
                    <h:column>
                        <f:facet name="header">#{msg['book.year']}</f:facet>
                        #{libro.anioPublicacion}
                    </h:column>
                    <h:column>
                        <f:facet name="header">#{msg['book.status']}</f:facet>
                        #{libro.estadoLectura}
                    </h:column>
                    <h:column>
                        <f:facet name="header">#{msg['book.rating']}</f:facet>
                        #{libro.valoracion}
                    </h:column>
                    <h:column>
                        <f:facet name="header">#{msg['actions']}</f:facet>
                        <h:commandLink value="#{msg['button.view']}" action="#{libroController.prepareView(libro)}"/>
                        <h:outputText value=" | "/>
                        <h:commandLink value="#{msg['button.edit']}" action="#{libroController.prepareEdit(libro)}"/>
                        <h:outputText value=" | "/>
                        <h:commandLink value="#{msg['button.delete']}" action="#{libroController.delete(libro)}" 
                                       onclick="return confirm('#{msg['confirm.delete']}');"/>
                    </h:column>
                </h:dataTable>
                
                <br/>
                <h:commandLink value="#{msg['button.back']}" action="index" styleClass="button"/>
            </h:form>
        </div>
    </h:body>
</html>